从高级编程语言翻译到低级的汇编语言,就是编译

过程:词法分析->语法分析->语义分析->中间代码生成->中间代码优化->机器代码生成

# 词法分析
把程序中每一个最小的基本单元的字符串转变为对象表示,将其中蕴含的抽象信息抽取出来,使其易于在后面的阶段使用

```
"abc"
词法分析之后得到
info={
    type:"String",
    value:"abc"
}
```

这样在后面的阶段,就通过info.type,info.value这样访问其中的数据,而不涉及麻烦的字符串处理

# 语法分析

将符合语法规则的一系列词变成句子,即考虑词之间的关系,不考虑其含义是否有意义,仅看语法正确即可,而句子,在程序语言中,就是一棵树,称作语法树

```
1+2 词法分析得到
a={
    type:"integer",
    value:1
}
op={
    type:"operator",
    value:"+"
}
b={
    type:"integer",
    value:2
}

语法分析得到
addexp={
    type:"binaryOpExpression",
    lChild:a,
    rChild:b,
    operator:op
}
```


# 语义分析
当分析语法时,像a+b这样的式子,a在当前上下文是否存在?b呢?如果没有,这个式子根本没有意义,这就是语义分析,把每个语法元素关联到正确的上下文元素上,一般在中间代码生成时一并进行

# 中间代码生成
得到一套既有类似于高级语言的抽象,比如其中运算的对象仍然是变量而非寄存器(便于优化,平台独立),又有汇编语言的顺序性(易于生成机器代码)的代码

```
c=a+b;
变成了
add a,b,c        ;把a和b相加,结果放到c
```

难点在于内存空间的分配,以及函数调用约定这些利用底层机制实现高级语言特性的部分

# 中间代码优化
消除表达式的重复求值,消除不必要的循环,...

是最有趣的部分

# 机器代码生成
给变量分配寄存器
无聊的翻译...